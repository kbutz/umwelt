
<!DOCTYPE html>
<html>
<head>
    <title>Umwelt: Sensory Heatmap</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { margin: 0; font-family: sans-serif; background: #0a0a0a; color: #eee; display: flex; flex-direction: column; align-items: center; }
        .chart-container { margin-top: 50px; margin-bottom: 50px; }
        .cell { cursor: crosshair; }
        .cell:hover { stroke: #fff; stroke-width: 2px; }
        .axis text { font-size: 11px; fill: #aaa; }
        .tooltip { position: absolute; background: rgba(0,0,0,0.9); padding: 12px; border-radius: 8px; pointer-events: none; opacity: 0; border: 1px solid #00d4ff; box-shadow: 0 4px 10px rgba(0,0,0,0.5); z-index: 1000; font-size: 0.9em; line-height: 1.4; }
        h1 { color: #00d4ff; margin-top: 30px; letter-spacing: 1px; }
        .legend { display: flex; margin-top: 20px; font-size: 0.8em; color: #888; }
        .legend-item { margin: 0 10px; }
    </style>
</head>
<body>
    <h1>Sensory Density by Order</h1>
    <p style="opacity: 0.7; font-size: 0.9em;">Intensity represents number of families in the order possessing the sense.</p>
    
    <div class="tooltip" id="tooltip"></div>
    <div class="chart-container" id="heatmap"></div>

    <script>
        const data = {"orders": ["Monogenea", "Beryciformes", "Vetigastropoda", "Siphonaptera", "Polychaeta", "Opisthobranchia", "Cetacea", "Trombidiformes", "Tetraphyllidea", "Pulmonata", "Ploima", "Eulipotyphla", "Desmodorida", "Cyclorhagida", "Cubozoa", "Ctenophora", "Copepoda", "Carnivora", "Araeolaimida", "Sceptrulophora", "Sarcoptiformes", "Rodentia", "Rhizocephala", "Rhabdocoela", "Peramelemorphia", "Octopoda", "N/A", "Lepidoptera", "Hymenoptera", "Gymnotiformes", "Entomobryomorpha", "Enoplida", "Dorylaimida", "Diptera", "Clypeasteroida", "Chiroptera", "Charadriiformes", "Anura", "Zygentoma", "Xiphosura"], "modalities": ["Mechanoreception", "Chemoreception", "Photoreception", "Electroreception", "Thermoreception", "bioluminescence", "hygroreception", "echolocation", "vocalization", "sub_type:General Mechanoreception", "sub_type:General Chemoreception", "sub_type:Echolocation", "nociception", "Other", "sub_type:Tactile Communication", "sub_type:Size Discrimination", "sub_type:Shape Discrimination", "sub_type:Orientation Discrimination", "sub_type:Habitat Preference", "sub_type:General Photoreception", "sub_type:General Cognition", "sub_type:General", "sub_type:Fluid Transport", "sub_type:Electric Field Generation", "sub_type:Dental", "sub_type:Cutaneous", "sub_type:Auditory Communication", "sound_production", "hydroreception", "camouflage", "Tominaga's organ", " Mechanoreception (antennae)"], "matrix": [{"order": "Monogenea", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Beryciformes", "Mechanoreception": 7, "Chemoreception": 7, "Photoreception": 5, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Vetigastropoda", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Siphonaptera", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 1, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Polychaeta", "Mechanoreception": 6, "Chemoreception": 6, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Opisthobranchia", "Mechanoreception": 6, "Chemoreception": 6, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Cetacea", "Mechanoreception": 5, "Chemoreception": 0, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 4, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Trombidiformes", "Mechanoreception": 1, "Chemoreception": 1, "Photoreception": 1, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Tetraphyllidea", "Mechanoreception": 5, "Chemoreception": 5, "Photoreception": 2, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Pulmonata", "Mechanoreception": 5, "Chemoreception": 5, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Ploima", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Eulipotyphla", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Desmodorida", "Mechanoreception": 5, "Chemoreception": 5, "Photoreception": 1, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Cyclorhagida", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Cubozoa", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 4, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Ctenophora", "Mechanoreception": 2, "Chemoreception": 1, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Copepoda", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Carnivora", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Araeolaimida", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 2, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Sceptrulophora", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Sarcoptiformes", "Mechanoreception": 1, "Chemoreception": 1, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Rodentia", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Rhizocephala", "Mechanoreception": 1, "Chemoreception": 1, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Rhabdocoela", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Peramelemorphia", "Mechanoreception": 4, "Chemoreception": 2, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Octopoda", "Mechanoreception": 2, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "N/A", "Mechanoreception": 3, "Chemoreception": 2, "Photoreception": 2, "Electroreception": 1, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Lepidoptera", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 1, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Hymenoptera", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 2, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Gymnotiformes", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 2, "Electroreception": 3, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Entomobryomorpha", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Enoplida", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Dorylaimida", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 2, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 1, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Diptera", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Clypeasteroida", "Mechanoreception": 4, "Chemoreception": 4, "Photoreception": 0, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Chiroptera", "Mechanoreception": 2, "Chemoreception": 2, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 3, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Charadriiformes", "Mechanoreception": 3, "Chemoreception": 0, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Anura", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Zygentoma", "Mechanoreception": 3, "Chemoreception": 3, "Photoreception": 3, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}, {"order": "Xiphosura", "Mechanoreception": 3, "Chemoreception": 2, "Photoreception": 1, "Electroreception": 0, "Thermoreception": 0, "bioluminescence": 0, "hygroreception": 0, "echolocation": 0, "vocalization": 0, "sub_type:General Mechanoreception": 0, "sub_type:General Chemoreception": 0, "sub_type:Echolocation": 0, "nociception": 0, "Other": 0, "sub_type:Tactile Communication": 0, "sub_type:Size Discrimination": 0, "sub_type:Shape Discrimination": 0, "sub_type:Orientation Discrimination": 0, "sub_type:Habitat Preference": 0, "sub_type:General Photoreception": 0, "sub_type:General Cognition": 0, "sub_type:General": 0, "sub_type:Fluid Transport": 0, "sub_type:Electric Field Generation": 0, "sub_type:Dental": 0, "sub_type:Cutaneous": 0, "sub_type:Auditory Communication": 0, "sound_production": 0, "hydroreception": 0, "camouflage": 0, "Tominaga's organ": 0, " Mechanoreception (antennae)": 0}]};
        
        const margin = {top: 150, right: 50, bottom: 50, left: 180};
        const width = Math.max(800, data.modalities.length * 40) - margin.left - margin.right;
        const height = (data.orders.length * 22) + margin.top + margin.bottom;

        const svg = d3.select("#heatmap")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        const x = d3.scaleBand()
            .range([0, width])
            .domain(data.modalities)
            .padding(0.05);

        svg.append("g")
            .attr("class", "axis")
            .call(d3.axisTop(x))
            .selectAll("text")
            .attr("transform", "rotate(-45)")
            .style("text-anchor", "start")
            .style("font-weight", d => ['Mechanoreception', 'Chemoreception', 'Photoreception'].includes(d) ? 'bold' : 'normal');

        const y = d3.scaleBand()
            .range([0, height - margin.top - margin.bottom])
            .domain(data.orders)
            .padding(0.05);

        svg.append("g")
            .attr("class", "axis")
            .call(d3.axisLeft(y));

        const colorScale = d3.scaleSequential()
            .interpolator(d3.interpolateTurbo)
            .domain([0, d3.max(data.matrix, d => d3.max(data.modalities, m => d[m]))]);

        data.matrix.forEach(row => {
            data.modalities.forEach(mod => {
                const val = row[mod];
                svg.append("rect")
                    .attr("x", x(mod))
                    .attr("y", y(row.order))
                    .attr("width", x.bandwidth())
                    .attr("height", y.bandwidth())
                    .attr("fill", val === 0 ? "#111" : colorScale(val))
                    .attr("class", "cell")
                    .on("mouseover", (event) => {
                        d3.select("#tooltip")
                            .style("opacity", 1)
                            .html(`<b>Order:</b> ${row.order}<br><b>Sense:</b> ${mod}<br><b>Family Count:</b> ${val}`)
                            .style("left", (event.pageX + 15) + "px")
                            .style("top", (event.pageY - 15) + "px");
                    })
                    .on("mousemove", (event) => {
                        d3.select("#tooltip")
                            .style("left", (event.pageX + 15) + "px")
                            .style("top", (event.pageY - 15) + "px");
                    })
                    .on("mouseout", () => d3.select("#tooltip").style("opacity", 0));
            });
        });
    </script>
</body>
</html>
    